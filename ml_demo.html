<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Primary Meta Tags -->
  <title>ML Demo - Advanced Agricultural AI Predictions | Mini Agronomist</title>
  <meta name="title" content="ML Demo - Advanced Agricultural AI Predictions | Mini Agronomist">
  <meta name="description" content="Experience advanced machine learning for agriculture with TensorFlow.js. Interactive dashboard showcasing AI-powered crop yield predictions and farm analytics." />
  <meta name="keywords" content="agricultural machine learning, farming AI, TensorFlow agriculture, crop prediction AI, precision agriculture, ML farming, agricultural analytics dashboard" />
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://miniagronomist.com/ml_demo.html">
  <meta property="og:title" content="ML Demo - Advanced Agricultural AI Predictions">
  <meta property="og:description" content="Experience advanced machine learning for agriculture with interactive dashboard showcasing AI-powered crop yield predictions.">
  <meta property="og:image" content="https://miniagronomist.com/assets/icons/logo.png">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://miniagronomist.com/ml_demo.html">
  <meta property="twitter:title" content="ML Demo - Advanced Agricultural AI Predictions">
  <meta property="twitter:description" content="Interactive machine learning dashboard for agricultural predictions using TensorFlow.js">
  <meta property="twitter:image" content="https://miniagronomist.com/assets/icons/logo.png">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="https://miniagronomist.com/ml_demo.html">
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="assets/icons/favicon.png">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
<link rel="stylesheet" href="style.css?v=20251223P">
  
  <!-- Config Script -->
  <script src="config/site-config.js"></script>
  
  <!-- Theme Toggle Script - Load Early -->
  <script>
    function toggleTheme() {
      const body = document.body;
      const currentTheme = body.classList.contains('dark-theme') ? 'dark' : 'light';
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      
      if (newTheme === 'dark') {
        body.classList.add('dark-theme');
      } else {
        body.classList.remove('dark-theme');
      }
      
      const themeBtn = document.getElementById('themeBtn');
      if (themeBtn) {
        const icon = themeBtn.querySelector('.material-icons');
        if (icon) {
          icon.textContent = newTheme === 'dark' ? 'light_mode' : 'dark_mode';
        }
      }
      
      localStorage.setItem('theme', newTheme);
      window.dispatchEvent(new CustomEvent('themechange', { detail: { theme: newTheme } }));
    }

    (function() {
      const savedTheme = localStorage.getItem('theme') || 'light';
      if (savedTheme === 'dark') {
        document.documentElement.classList.add('dark-theme');
        document.body.classList.add('dark-theme');
      }
    })();
    
    window.addEventListener('storage', function(e) {
      if (e.key === 'theme') {
        const newTheme = e.newValue;
        if (newTheme === 'dark') {
          document.body.classList.add('dark-theme');
        } else {
          document.body.classList.remove('dark-theme');
        }
        
        const themeBtn = document.getElementById('themeBtn');
        if (themeBtn) {
          const icon = themeBtn.querySelector('.material-icons');
          if (icon) {
            icon.textContent = newTheme === 'dark' ? 'light_mode' : 'dark_mode';
          }
        }
      }
    });
    
    window.addEventListener('DOMContentLoaded', function() {
      const savedTheme = localStorage.getItem('theme') || 'light';
      const themeBtn = document.getElementById('themeBtn');
      if (themeBtn) {
        const icon = themeBtn.querySelector('.material-icons');
        if (icon) {
          icon.textContent = savedTheme === 'dark' ? 'light_mode' : 'dark_mode';
        }
      }
    });
  </script>
  
  <!-- Internationalization -->
  <script src="js/i18n-data.js"></script>
  <script src="js/i18n-manager.js"></script>
  
  <style>
    .ml-demo {
      max-width: 1200px;
      margin: 2rem auto;
      padding: 2rem;
      background: var(--surface);
      border-radius: 16px;
      box-shadow: var(--elevation-2);
    }
    
    .prediction-methods {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }
    
    .method-card {
      background: linear-gradient(135deg, #f8fffe 0%, #e8f5e8 100%);
      padding: 2rem;
      border-radius: 16px;
      border-left: 4px solid var(--primary);
      box-shadow: 0 4px 12px rgba(76, 175, 80, 0.1);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .method-card::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 100px;
      height: 100px;
      background: radial-gradient(circle, rgba(76, 175, 80, 0.1) 0%, transparent 70%);
      border-radius: 0 0 0 100px;
    }
    
    .method-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 24px rgba(76, 175, 80, 0.2);
      border-left-color: #43A047;
    }
    
    .method-card h3 {
      color: var(--primary);
      margin-bottom: 1rem;
      font-size: 1.3rem;
      position: relative;
      z-index: 1;
    }
    
    .method-card p {
      color: #2E4533;
      line-height: 1.6;
      margin-bottom: 1.5rem;
    }
    
    .confidence-meter {
      width: 100%;
      height: 10px;
      background: #E8F5E8;
      border-radius: 8px;
      overflow: hidden;
      margin: 1rem 0;
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .confidence-fill {
      height: 100%;
      background: linear-gradient(90deg, #FFB74D, #66BB6A, #4CAF50);
      transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 2px 4px rgba(76, 175, 80, 0.3);
    }
    
    .feature-tag {
      display: inline-block;
      background: linear-gradient(135deg, #66BB6A, #4CAF50);
      color: white;
      padding: 0.4rem 0.8rem;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
      margin: 0.2rem 0.3rem 0.2rem 0;
      box-shadow: 0 2px 6px rgba(76, 175, 80, 0.3);
      transition: all 0.3s ease;
    }
    
    .feature-tag:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(76, 175, 80, 0.4);
    }
    
    .online-status {
      position: fixed;
      top: 100px;
      right: 2rem;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      padding: 0.8rem 1.2rem;
      border-radius: 25px;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
      border: 2px solid #E8F5E8;
      z-index: 1000;
    }
    
    .status-indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #66BB6A;
      animation: statusPulse 2s infinite;
    }
    
    .status-indicator.online {
      background: linear-gradient(135deg, #66BB6A, #4CAF50);
    }
    
    .status-indicator.offline {
      background: linear-gradient(135deg, #FFB74D, #FF9800);
    }
    
    @keyframes statusPulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.6; transform: scale(1.2); }
    }
    
    .card {
      background: linear-gradient(135deg, #ffffff 0%, #f8fffe 100%);
      border-radius: 20px;
      padding: 2.5rem;
      margin: 2rem 0;
      box-shadow: 0 6px 20px rgba(76, 175, 80, 0.08);
      border: 1px solid #E8F5E8;
      position: relative;
      overflow: hidden;
    }
    
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #66BB6A, #4CAF50, #81C784);
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #66BB6A 0%, #4CAF50 100%);
      color: white;
      border: none;
      padding: 1rem 2.5rem;
      border-radius: 30px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
      position: relative;
      overflow: hidden;
    }
    
    .btn-primary::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.6s;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(76, 175, 80, 0.4);
    }
    
    .btn-primary:hover::before {
      left: 100%;
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin-top: 1.5rem;
    }
    
    .stat-card {
      background: linear-gradient(135deg, #E8F5E8 0%, #F1F8E9 100%);
      padding: 1.5rem;
      border-radius: 12px;
      text-align: center;
      border: 2px solid transparent;
      transition: all 0.3s ease;
    }
    
    .stat-card:hover {
      border-color: #66BB6A;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(76, 175, 80, 0.15);
    }
    
    .stat-value {
      font-size: 2rem;
      font-weight: 800;
      color: #2E7D32;
      margin-bottom: 0.5rem;
    }
    
    .stat-label {
      color: #2E4533;
      font-weight: 600;
      text-transform: uppercase;
      font-size: 0.9rem;
      letter-spacing: 0.5px;
    }
    
    /* Enhanced Dashboard Styles */
    .farm-dashboard {
      margin-top: 2rem;
    }
    
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
    }
    
    .dashboard-card {
      background: linear-gradient(135deg, #f8fffe 0%, #e8f5e8 100%);
      border-radius: 16px;
      padding: 1.8rem;
      box-shadow: 0 4px 15px rgba(76, 175, 80, 0.1);
      border: 2px solid #E8F5E8;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .dashboard-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, #66BB6A, #4CAF50);
    }
    
    .dashboard-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 25px rgba(76, 175, 80, 0.2);
      border-color: #66BB6A;
    }
    
    .card-icon {
      font-size: 2.5rem;
      margin-bottom: 1rem;
      display: block;
    }
    
    .dashboard-card h3 {
      color: #2E7D32;
      margin-bottom: 1.5rem;
      font-size: 1.2rem;
    }
    
    .weather-data {
      display: flex;
      justify-content: space-between;
      margin-bottom: 1rem;
    }
    
    .weather-metric {
      text-align: center;
    }
    
    .metric-value {
      display: block;
      font-size: 1.4rem;
      font-weight: 700;
      color: #2E7D32;
      margin-bottom: 0.3rem;
    }
    
    .metric-label {
      font-size: 0.8rem;
      color: #2E4533;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .soil-metrics {
      margin-bottom: 1rem;
    }
    
    .soil-metric {
      margin-bottom: 1rem;
    }
    
    .metric-bar {
      width: 100%;
      height: 8px;
      background: #E8F5E8;
      border-radius: 4px;
      overflow: hidden;
      margin-bottom: 0.5rem;
    }
    
    .metric-fill {
      height: 100%;
      background: linear-gradient(90deg, #81C784, #66BB6A);
      border-radius: 4px;
      transition: width 0.6s ease;
    }
    
    .growth-stages {
      display: flex;
      justify-content: space-between;
      margin-bottom: 1rem;
    }
    
    .stage-indicator {
      padding: 0.5rem;
      border-radius: 8px;
      font-size: 0.8rem;
      background: #F1F8E9;
      color: #2E4533;
      transition: all 0.3s ease;
    }
    
    .stage-indicator.active {
      background: linear-gradient(135deg, #66BB6A, #4CAF50);
      color: white;
      font-weight: 600;
    }
    
    .growth-progress {
      text-align: center;
      margin-bottom: 1rem;
    }
    
    .progress-bar {
      width: 100%;
      height: 10px;
      background: #E8F5E8;
      border-radius: 5px;
      overflow: hidden;
      margin-bottom: 0.5rem;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #81C784, #66BB6A, #4CAF50);
      border-radius: 5px;
      transition: width 0.8s ease;
    }
    
    .prediction-summary {
      margin-bottom: 1rem;
    }
    
    .prediction-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.8rem;
      padding: 0.5rem;
      background: rgba(255, 255, 255, 0.5);
      border-radius: 8px;
    }
    
    .prediction-label {
      color: #2E4533;
      font-weight: 600;
    }
    
    .prediction-value {
      font-weight: 700;
    }
    
    .prediction-value.good {
      color: #2E7D32;
    }
    
    .prediction-value.moderate {
      color: #FF9800;
    }
    
    .mini-btn {
      background: linear-gradient(135deg, #81C784, #66BB6A);
      color: white;
      border: none;
      padding: 0.6rem 1.2rem;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 100%;
    }
    
    .mini-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
    }
    
    .analyzer-controls {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin: 2rem 0;
      padding: 2rem;
      background: linear-gradient(135deg, #f8fffe 0%, #e8f5e8 100%);
      border-radius: 16px;
      border: 2px solid #E8F5E8;
    }
    
    .input-group {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }
    
    .input-group label {
      font-weight: 600;
      color: #2E7D32;
      font-size: 1rem;
    }
    
    .input-group select,
    .input-group input[type="range"] {
      padding: 0.8rem;
      border: 2px solid #E8F5E8;
      border-radius: 8px;
      background: white;
      color: #2E4533;
      font-weight: 500;
      transition: all 0.3s ease;
    }
    
    .input-group select:focus,
    .input-group input:focus {
      outline: none;
      border-color: #66BB6A;
      box-shadow: 0 0 0 3px rgba(102, 187, 106, 0.1);
    }
    
    #farmSizeValue {
      font-weight: 700;
      color: #2E7D32;
      text-align: center;
      padding: 0.5rem;
      background: rgba(102, 187, 106, 0.1);
      border-radius: 8px;
    }
    
    .accuracy-indicator {
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid rgba(102, 187, 106, 0.2);
    }
    
    .accuracy-indicator span {
      font-weight: 600;
      color: #2E7D32;
      font-size: 0.9rem;
    }
    
    .risk-analysis {
      background: var(--error-container);
      color: var(--on-error-container);
      padding: 1rem;
      border-radius: 8px;
      margin-top: 1rem;
    }
    
    .feature-importance {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    
    .statistics-panel {
      background: var(--tertiary-container);
      color: var(--on-tertiary-container);
      padding: 1.5rem;
      border-radius: 12px;
      margin-top: 2rem;
    }
    
    .stat-item {
      text-align: center;
    }
    
    .stat-value {
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--tertiary);
    }
    
    .status-indicator {
      width: 8px;
      height: 8px;
      border-radius: 50%;
    }
    
    .status-indicator.online {
      background: var(--tertiary);
    }
    
    .status-indicator.offline {
      background: var(--error);
    }
  </style>
</head>
<body>
  <header role="banner">
    <div class="header-container">
      <a href="index.html" class="nav-brand" title="Mini Agronomist - Agricultural Intelligence Platform">
        <img src="assets/icons/logo.png" alt="Mini Agronomist" class="nav-logo" width="48" height="48">
        <span>Mini Agronomist</span>
      </a>
      <div class="header-actions">
        <nav class="nav-links" role="navigation">
          <a href="index.html" role="button" tabindex="0" data-i18n="nav.yield">ğŸŒ¾ Yield Predictor</a>
          <a href="plant-scanner.html" role="button" tabindex="0" class="new-feature">
            ğŸ“¸ Plant Scanner
            <span class="nav-badge">NEW</span>
          </a>
          <a href="#" class="active" role="button" tabindex="0" data-i18n="nav.ml">ğŸ¤– ML Analytics</a>
        </nav>
        <div class="header-buttons">
          <button id="themeBtn" class="icon-btn" aria-label="Toggle dark mode" title="ğŸŒ™ Toggle Theme - Switch between light and dark mode" onclick="toggleTheme()">
            <span class="material-icons">dark_mode</span>
          </button>
          <button id="helpBtn" class="icon-btn" aria-label="Show app tutorial and help guide" title="ğŸ“– Help & Tutorial - Learn how to use Mini Agronomist effectively" data-i18n-title="btn.help">
            <span class="material-icons">help_outline</span>
          </button>
          <button id="settingsBtn" class="icon-btn" aria-label="Open app settings and preferences" title="âš™ï¸ Settings - Customize your experience and preferences" data-i18n-title="btn.settings">
            <span class="material-icons">settings</span>
          </button>
          <button id="mobileMenuBtn" class="icon-btn mobile-menu-btn" aria-label="Toggle mobile navigation menu" title="ğŸ”½ Menu">
            <span class="material-icons">menu</span>
          </button>
        </div>
      </div>
    </div>
  </header>

  <main class="main-content">
    <div class="ml-demo">
      <div class="online-status" id="connectionStatus">
        <div class="status-indicator"></div>
        <span data-i18n="ml.status.checking">Checking connection...</span>
      </div>
      
      <h1 data-i18n="ml.title">ğŸ¤– Advanced Agricultural Intelligence Lab</h1>
      <p data-i18n="ml.desc">Experience next-generation agricultural intelligence with ML models, real-time analytics, and precision farming insights.</p>
      
      <!-- Interactive Farm Dashboard -->
      <div class="card">
        <h2 data-i18n="ml.dashboard.title">ğŸšœ Smart Farm Dashboard</h2>
        <div class="farm-dashboard">
          <div class="dashboard-grid">
            <div class="dashboard-card weather-card">
              <div class="card-icon">ğŸŒ¤ï¸</div>
              <h3>Weather Intelligence</h3>
              <div class="weather-data" id="weatherData">
                <div class="weather-metric">
                  <span class="metric-value" id="temperature">23Â°C</span>
                  <span class="metric-label">Temperature</span>
                </div>
                <div class="weather-metric">
                  <span class="metric-value" id="humidity">68%</span>
                  <span class="metric-label">Humidity</span>
                </div>
                <div class="weather-metric">
                  <span class="metric-value" id="rainfall">12mm</span>
                  <span class="metric-label">Weekly Rain</span>
                </div>
              </div>
              <button onclick="updateWeatherData()" class="mini-btn">ğŸ”„ Update</button>
            </div>
            
            <div class="dashboard-card soil-card">
              <div class="card-icon">ğŸŒ±</div>
              <h3>Soil Health Monitor</h3>
              <div class="soil-metrics">
                <div class="soil-metric">
                  <div class="metric-bar">
                    <div class="metric-fill" style="width: 75%" data-value="7.2"></div>
                  </div>
                  <span>pH Level: 7.2</span>
                </div>
                <div class="soil-metric">
                  <div class="metric-bar">
                    <div class="metric-fill" style="width: 60%" data-value="60"></div>
                  </div>
                  <span>Moisture: 60%</span>
                </div>
                <div class="soil-metric">
                  <div class="metric-bar">
                    <div class="metric-fill" style="width: 85%" data-value="85"></div>
                  </div>
                  <span>Nutrients: 85%</span>
                </div>
              </div>
              <button onclick="analyzeSoil()" class="mini-btn">ğŸ”¬ Analyze</button>
            </div>
            
            <div class="dashboard-card crop-card">
              <div class="card-icon">ğŸŒ¾</div>
              <h3>Crop Growth Tracker</h3>
              <div class="growth-stages">
                <div class="stage-indicator active">ğŸŒ± Seedling</div>
                <div class="stage-indicator active">ğŸŒ¿ Vegetative</div>
                <div class="stage-indicator active">ğŸŒ¸ Flowering</div>
                <div class="stage-indicator">ğŸŒ¾ Maturity</div>
              </div>
              <div class="growth-progress">
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 65%"></div>
                </div>
                <span>Growth Progress: 65%</span>
              </div>
              <button onclick="updateGrowthStage()" class="mini-btn">ğŸ“ˆ Track</button>
            </div>
            
            <div class="dashboard-card prediction-card">
              <div class="card-icon">ğŸ¯</div>
              <h3>AI Predictions</h3>
              <div class="prediction-summary">
                <div class="prediction-item">
                  <span class="prediction-label">Yield Forecast</span>
                  <span class="prediction-value good">+8.5 tons/ha</span>
                </div>
                <div class="prediction-item">
                  <span class="prediction-label">Risk Level</span>
                  <span class="prediction-value moderate">Medium</span>
                </div>
                <div class="prediction-item">
                  <span class="prediction-label">Harvest Date</span>
                  <span class="prediction-value">Oct 15</span>
                </div>
              </div>
              <button onclick="runRealTimePrediction()" class="mini-btn">ğŸš€ Predict</button>
            </div>
          </div>
        </div>
      </div>
      
      <div class="card">
        <h2>ğŸŒ± ML Crop Analyzer</h2>
        <p>Advanced machine learning analysis for your specific crop conditions:</p>
        
        <div class="analyzer-controls">
          <div class="input-group">
            <label for="cropType">ğŸŒ¾ Crop Type:</label>
            <select id="cropType" onchange="updateCropAnalysis()">
              <option value="maize">ğŸŒ½ Maize</option>
              <option value="wheat">ğŸŒ¾ Wheat</option>
              <option value="rice">ğŸš Rice</option>
              <option value="soybean">ğŸ«˜ Soybean</option>
              <option value="tomato">ğŸ… Tomato</option>
            </select>
          </div>
          
          <div class="input-group">
            <label for="farmSize">ğŸ“ Farm Size (hectares):</label>
            <input type="range" id="farmSize" min="1" max="100" value="10" oninput="updateFarmSize(this.value)">
            <span id="farmSizeValue">10 ha</span>
          </div>
          
          <div class="input-group">
            <label for="techLevel">ğŸ¤– Technology Level:</label>
            <select id="techLevel" onchange="updateTechLevel()">
              <option value="basic">ğŸšœ Basic Farming</option>
              <option value="precision">ğŸ“¡ Precision Agriculture</option>
              <option value="smart">ğŸ¤– Smart Farming</option>
              <option value="autonomous">ğŸ›¸ Autonomous Systems</option>
            </select>
          </div>
        </div>
        
        <button onclick="runAdvancedDemo()" class="btn-primary" id="runDemoBtn">
          ğŸš€ Run Advanced ML Analysis
        </button>
        
        <div id="predictionResults" style="display: none;">
          <div class="prediction-methods" id="methodResults">
            <!-- Prediction method results will be inserted here -->
          </div>
          
          <div class="statistics-panel">
            <h3>ğŸ“Š Statistical Analysis</h3>
            <div class="stats-grid" id="statsGrid">
              <!-- Statistical metrics will be inserted here -->
            </div>
          </div>
          
          <div class="card" style="margin-top: 2rem;">
            <h3>ğŸ§  Model Intelligence</h3>
            <div id="modelIntelligence">
              <!-- AI model insights will be inserted here -->
            </div>
          </div>
        </div>
      </div>
      
      <div class="card">
        <h2>ğŸ”¬ AI-Powered Prediction Methods</h2>
        <p>Explore our comprehensive suite of machine learning and statistical models designed for precision agriculture:</p>
        <div class="prediction-methods">
          <div class="method-card">
            <h3>ğŸ§® Multiple Linear Regression</h3>
            <p>Classical statistical approach using matrix operations for multi-factor yield prediction with high interpretability.</p>
            <div class="feature-importance">
              <span class="feature-tag">ğŸŒ§ï¸ Rainfall</span>
              <span class="feature-tag">ğŸŒ¡ï¸ Temperature</span>
              <span class="feature-tag">ğŸŒ± Soil Quality</span>
            </div>
            <div class="accuracy-indicator">
              <span>Accuracy: 85%</span>
              <div class="confidence-meter">
                <div class="confidence-fill" style="width: 85%"></div>
              </div>
            </div>
          </div>
          
          <div class="method-card">
            <h3>ğŸ¯ Bayesian Inference</h3>
            <p>Probabilistic approach that quantifies uncertainty and continuously learns from new agricultural data.</p>
            <div class="feature-importance">
              <span class="feature-tag">ğŸ“Š Prior Knowledge</span>
              <span class="feature-tag">â“ Uncertainty</span>
              <span class="feature-tag">ğŸ” Evidence</span>
            </div>
            <div class="accuracy-indicator">
              <span>Accuracy: 78%</span>
              <div class="confidence-meter">
                <div class="confidence-fill" style="width: 78%"></div>
              </div>
            </div>
          </div>
          
          <div class="method-card">
            <h3>ğŸ“ˆ Time Series Analysis</h3>
            <p>Advanced temporal modeling for seasonal patterns, weather cycles, and historical trend analysis.</p>
            <div class="feature-importance">
              <span class="feature-tag">ğŸ”„ Seasonality</span>
              <span class="feature-tag">ğŸ“Š Trends</span>
              <span class="feature-tag">ğŸ”® Forecasting</span>
            </div>
            <div class="accuracy-indicator">
              <span>Accuracy: 82%</span>
              <div class="confidence-meter">
                <div class="confidence-fill" style="width: 82%"></div>
              </div>
            </div>
          </div>
          
          <div class="method-card">
            <h3>ğŸ² Monte Carlo Simulation</h3>
            <p>Risk analysis using thousands of scenarios to model uncertainty and extreme weather events.</p>
            <div class="feature-importance">
              <span class="feature-tag">âš ï¸ Risk Analysis</span>
              <span class="feature-tag">ğŸ“ˆ Probability</span>
              <span class="feature-tag">ğŸ¯ Scenarios</span>
            </div>
            <div class="accuracy-indicator">
              <span>Risk Assessment: 92%</span>
              <div class="confidence-meter">
                <div class="confidence-fill" style="width: 92%"></div>
              </div>
            </div>
          </div>
          
          <div class="method-card">
            <h3>ğŸ§  Neural Networks</h3>
            <p>Deep learning models using TensorFlow.js for complex pattern recognition in agricultural data.</p>
            <div class="feature-importance">
              <span class="feature-tag">ğŸ¤– Deep Learning</span>
              <span class="feature-tag">ğŸ” Pattern Recognition</span>
              <span class="feature-tag">ğŸ“Š Non-linear</span>
            </div>
            <div class="accuracy-indicator">
              <span>Accuracy: 91%</span>
              <div class="confidence-meter">
                <div class="confidence-fill" style="width: 91%"></div>
              </div>
            </div>
          </div>
          
          <div class="method-card">
            <h3>ğŸ¯ Ensemble Methods</h3>
            <p>Combines multiple algorithms with dynamic weighting for maximum accuracy and reliability.</p>
            <div class="feature-importance">
              <span class="feature-tag">ğŸ”„ Model Fusion</span>
              <span class="feature-tag">âš–ï¸ Dynamic Weighting</span>
              <span class="feature-tag">ğŸ¯ Accuracy</span>
            </div>
            <div class="accuracy-indicator">
              <span>Accuracy: 94%</span>
              <div class="confidence-meter">
                <div class="confidence-fill" style="width: 94%"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="card">
        <h2>ğŸŒ Online vs Offline Intelligence</h2>
        <div class="prediction-methods">
          <div class="method-card">
            <h3>â˜ï¸ Online Mode</h3>
            <p>When connected to the internet:</p>
            <ul>
              <li>Real-time weather data integration</li>
              <li>Satellite imagery analysis</li>
              <li>Market price data feeds</li>
              <li>Pre-trained neural network models</li>
              <li>Cloud-based model updates</li>
              <li>Global agricultural databases</li>
            </ul>
          </div>
          
          <div class="method-card">
            <h3>ğŸ“± Offline Mode</h3>
            <p>Works completely offline with:</p>
            <ul>
              <li>Statistical models (regression, Bayesian)</li>
              <li>Cached historical weather patterns</li>
              <li>Local crop knowledge database</li>
              <li>Monte Carlo risk simulations</li>
              <li>Browser-based TensorFlow.js models</li>
              <li>Progressive Web App capabilities</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Help Modal -->
  <div id="helpModal" class="modal hidden" role="dialog" aria-labelledby="help-title" aria-modal="true" onclick="if(event.target === this) this.classList.add('hidden')">
    <div class="modal-content large-modal" onclick="event.stopPropagation()">
      <div class="modal-header">
        <h2 id="help-title">
          <span data-i18n="help.title">ğŸ¤” Help & FAQ</span>
        </h2>
        <button class="modal-close" aria-label="Close help dialog">
          <span class="material-icons">close</span>
        </button>
      </div>
      <div class="modal-body">
        <!-- FAQ Navigation Tabs -->
        <div class="faq-tabs">
          <button class="faq-tab active" data-tab="quickstart" data-i18n="help.tab.quickstart">ğŸš€ Quick Start</button>
          <button class="faq-tab" data-tab="features" data-i18n="help.tab.features">âš™ï¸ Features</button>
          <button class="faq-tab" data-tab="troubleshooting" data-i18n="help.tab.troubleshooting">ğŸ”§ Troubleshooting</button>
          <button class="faq-tab" data-tab="about" data-i18n="help.tab.about">â„¹ï¸ About</button>
        </div>

        <!-- FAQ Search -->
        <input type="text" class="faq-search" placeholder="ğŸ” Search FAQ..." id="faqModalSearch">

        <!-- Quick Start Tab -->
        <div class="faq-content active" id="quickstart">
          <div class="help-section">
            <h3 data-i18n="help.quickstart.title">ğŸŒ± Getting Started in 4 Steps</h3>
            <div class="help-step">
              <span class="step-number">1</span>
              <div>
                <h4 data-i18n="help.step1.title">Select Your Region</h4>
                <p data-i18n="help.step1.desc">Choose from 14+ global agricultural regions. This affects climate data, growing seasons, and local crop varieties.</p>
                <div class="help-tip"><span data-i18n="help.tip">ğŸ’¡ Tip:</span> <span data-i18n="help.step1.tip">Choose the region closest to your farm location for best results.</span></div>
              </div>
            </div>
            <div class="help-step">
              <span class="step-number">2</span>
              <div>
                <h4 data-i18n="help.step2.title">Choose Soil & Crop</h4>
                <p data-i18n="help.step2.desc">Select your soil type (clay, sandy, loam, etc.) and crop from our database of 25+ varieties.</p>
                <div class="help-tip"><span data-i18n="help.tip">ğŸ’¡ Tip:</span> <span data-i18n="help.step2.tip">Most farms have loam or clay-loam soil.</span></div>
              </div>
            </div>
            <div class="help-step">
              <span class="step-number">3</span>
              <div>
                <h4 data-i18n="help.step3.title">Enter Growing Conditions</h4>
                <p data-i18n="help.step3.desc">Provide expected rainfall (mm) and planting date. Use local weather forecasts or historical data.</p>
                <div class="help-tip"><span data-i18n="help.tip">ğŸ’¡ Tip:</span> <span data-i18n="help.step3.tip">Check your local weather service for seasonal forecasts.</span></div>
              </div>
            </div>
            <div class="help-step">
              <span class="step-number">4</span>
              <div>
                <h4 data-i18n="help.step4.title">Get Your Prediction</h4>
                <p data-i18n="help.step4.desc">Review yield estimate, confidence score, risk assessment, and personalized recommendations.</p>
                <div class="help-tip"><span data-i18n="help.proTip">âœ¨ Pro tip:</span> <span data-i18n="help.step4.tip">Try different planting dates to optimize your timing!</span></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Features Tab -->
        <div class="faq-content" id="features">
          <div class="faq-item">
            <div class="faq-question" data-i18n="help.faq.q1">What crops and regions are supported?</div>
            <div class="faq-answer">
              <p><strong data-i18n="help.faq.regions">Regions:</strong> <span data-i18n="help.faq.a1.regions">United States, India, China, Brazil, Europe, Australia, Canada, Argentina, and more.</span></p>
              <p><strong data-i18n="help.faq.crops">Crops:</strong> <span data-i18n="help.faq.a1.crops">Wheat, Rice, Corn, Soybeans, Cotton, Potatoes, Tomatoes, and 18+ others.</span></p>
            </div>
          </div>
          <div class="faq-item">
            <div class="faq-question" data-i18n="help.faq.q2">How accurate are the predictions?</div>
            <div class="faq-answer">
              <p data-i18n="help.faq.a2.p1">Typically 75-90% accuracy depending on crop and region. Each prediction includes a confidence score.</p>
              <p><strong data-i18n="help.faq.remember">Remember:</strong> <span data-i18n="help.faq.a2.p2">These are estimates - combine with your local knowledge!</span></p>
            </div>
          </div>
          <div class="faq-item">
            <div class="faq-question" data-i18n="help.faq.q3">Can I save and export my predictions?</div>
            <div class="faq-answer">
              <p data-i18n="help.faq.a3.p1">Yes! Your last 10 predictions are automatically saved locally. You can also:</p>
              <ul>
                <li data-i18n="help.faq.a3.li1">ğŸ“Š Export as JSON files</li>
                <li data-i18n="help.faq.a3.li2">ğŸ–¨ï¸ Print professional reports</li>
                <li data-i18n="help.faq.a3.li3">ğŸ“ˆ Compare different scenarios</li>
              </ul>
            </div>
          </div>
          <div class="faq-item">
            <div class="faq-question" data-i18n="help.faq.q4">Is my farm data private and secure?</div>
            <div class="faq-answer">
              <p><strong data-i18n="help.faq.private">100% Private!</strong> <span data-i18n="help.faq.a4.p1">Mini Agronomist runs entirely on your device:</span></p>
              <ul>
                <li data-i18n="help.faq.a4.li1">ğŸ”’ No data sent to servers</li>
                <li data-i18n="help.faq.a4.li2">ğŸ’» All processing done locally</li>
                <li data-i18n="help.faq.a4.li3">ğŸ  Data stored only on your device</li>
                <li data-i18n="help.faq.a4.li4">âœ¨ Works completely offline</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Troubleshooting Tab -->
        <div class="faq-content" id="troubleshooting">
          <div class="faq-item">
            <div class="faq-question" data-i18n="help.faq.q5">The app isn't loading or is showing errors</div>
            <div class="faq-answer">
              <p><strong data-i18n="help.faq.trySteps">Try these steps:</strong></p>
              <ol>
                <li data-i18n="help.faq.a5.li1">Refresh the page (Ctrl+F5 or Cmd+Shift+R)</li>
                <li data-i18n="help.faq.a5.li2">Clear your browser cache</li>
                <li data-i18n="help.faq.a5.li3">Check your internet connection</li>
                <li data-i18n="help.faq.a5.li4">Try a different browser</li>
              </ol>
            </div>
          </div>
          <div class="faq-item">
            <div class="faq-question" data-i18n="help.faq.q6">Predictions seem unrealistic or wrong</div>
            <div class="faq-answer">
              <p><strong data-i18n="help.faq.checkInputs">Check your inputs:</strong></p>
              <ul>
                <li data-i18n="help.faq.a6.li1">Verify region matches your location</li>
                <li data-i18n="help.faq.a6.li2">Confirm soil type is correct</li>
                <li data-i18n="help.faq.a6.li3">Check rainfall amounts are reasonable</li>
                <li data-i18n="help.faq.a6.li4">Ensure planting date is appropriate for your crop</li>
              </ul>
            </div>
          </div>
          <div class="faq-item">
            <div class="faq-question" data-i18n="help.faq.q7">My region or crop isn't listed</div>
            <div class="faq-answer">
              <p data-i18n="help.faq.a7.p1">Choose the closest available option:</p>
              <ul>
                <li data-i18n="help.faq.a7.li1">ğŸŒ Pick a region with similar climate</li>
                <li data-i18n="help.faq.a7.li2">ğŸŒ± Select a crop from the same family</li>
                <li data-i18n="help.faq.a7.li3">ğŸ“§ Contact us to request additions</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- About Tab -->
        <div class="faq-content" id="about">
          <div class="about-section">
            <h3 data-i18n="help.about.title">ğŸŒ¾ About Mini Agronomist</h3>
            <p data-i18n="help.about.desc">Mini Agronomist is a free, privacy-first agricultural intelligence tool designed to help farmers worldwide make informed planting decisions.</p>
            
            <h4 data-i18n="help.about.how">ğŸ”¬ How It Works</h4>
            <ul>
              <li><strong data-i18n="help.about.models">Statistical Models:</strong> <span data-i18n="help.about.models.desc">Based on historical agricultural data</span></li>
              <li><strong data-i18n="help.about.ml">Machine Learning:</strong> <span data-i18n="help.about.ml.desc">Advanced AI predictions using TensorFlow.js</span></li>
              <li><strong data-i18n="help.about.data">Regional Data:</strong> <span data-i18n="help.about.data.desc">Climate and soil profiles for accurate estimates</span></li>
            </ul>

            <h4 data-i18n="help.about.mission">ğŸ¯ Our Mission</h4>
            <p data-i18n="help.about.mission.desc">To democratize agricultural intelligence and help farmers optimize their yields through data-driven insights, while keeping their data completely private.</p>

            <h4 data-i18n="help.about.contact">ğŸ“ Need More Help?</h4>
            <div class="contact-info">
              <p><strong data-i18n="help.contact.support">ğŸ“§ Support:</strong> support@miniagronomist.com</p>
              <p><strong data-i18n="help.contact.website">ğŸŒ Website:</strong> www.miniagronomist.com</p>
              <p><strong data-i18n="help.contact.guide">ğŸ“š Full Guide:</strong> <a href="pages/onboarding.html" target="_blank" data-i18n="help.contact.tutorial">Complete Tutorial</a></p>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary modal-close" data-i18n="btn.close">Close</button>
        <button class="btn btn-primary" onclick="window.open('pages/onboarding.html', '_blank')" data-i18n="btn.fullTutorial">ğŸ“š Full Tutorial</button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <!-- Brand Section -->
      <div class="footer-section footer-brand-section">
        <div class="footer-brand">
          <img src="assets/icons/logo.png" alt="Mini Agronomist" class="footer-logo" width="40" height="40">
          <h3>Mini Agronomist</h3>
        </div>
        <p class="footer-tagline" data-tagline>AI-powered agricultural intelligence for farmers worldwide ğŸŒ¾</p>
        <div class="footer-social">
          <a href="#" data-social-twitter target="_blank" aria-label="Follow on X" class="social-link">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
            </svg>
          </a>
          <a href="#" data-social-github target="_blank" aria-label="GitHub" class="social-link">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 0C5.374 0 0 5.373 0 12 0 17.302 3.438 21.8 8.207 23.387c.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"/>
            </svg>
          </a>
          <a href="#" data-social-linkedin target="_blank" aria-label="LinkedIn" class="social-link">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
            </svg>
          </a>
        </div>
      </div>
      
      <!-- Features -->
      <div class="footer-section">
        <h4>Features</h4>
        <ul class="footer-links">
          <li><a href="index.html#prediction">ğŸŒ¾ Yield Prediction</a></li>
          <li><a href="plant-scanner.html">ğŸ“¸ Plant Scanner</a></li>
          <li><a href="ml_demo.html">ğŸ¤– ML Analytics</a></li>
        </ul>
      </div>
      
      <!-- Resources -->
      <div class="footer-section">
        <h4>Resources</h4>
        <ul class="footer-links">
          <li><a href="index.html" onclick="setTimeout(() => document.getElementById('helpBtn')?.click(), 100); return true;">ğŸ“š Help Center</a></li>
          <li><a href="pages/onboarding.html" target="_blank">ğŸ¯ Tutorial</a></li>
          <li><a href="pages/faq.html" target="_blank">â“ FAQ</a></li>
        </ul>
      </div>
      
      <!-- Legal -->
      <div class="footer-section">
        <h4>Legal</h4>
        <ul class="footer-links">
          <li><a href="pages/privacy-policy.html" target="_blank">ğŸ”’ Privacy</a></li>
          <li><a href="pages/terms-of-service.html" target="_blank">ğŸ“‹ Terms</a></li>
        </ul>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p data-copyright>&copy; 2025 Mini Agronomist. Made with ğŸŒ± for farmers worldwide.</p>
      <a href="#" data-github target="_blank">View on GitHub â†’</a>
    </div>
  </footer>

  <!-- Core Scripts -->
  <script src="app.js"></script>
  <script type="module" src="js/statistical_models.js"></script>
  <script type="module" src="js/advanced_prediction_engine.js"></script>
  
  <!-- TensorFlow.js for Machine Learning -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.11.0/dist/tf.min.js" crossorigin="anonymous"></script>
  
  <script>
    let predictionEngine = null;
    
    // Update connection status
    function updateConnectionStatus() {
      const statusElement = document.getElementById('connectionStatus');
      const indicator = statusElement.querySelector('.status-indicator');
      const text = statusElement.querySelector('span');
      
      if (navigator.onLine) {
        statusElement.className = 'online-status online';
        indicator.className = 'status-indicator online';
        text.textContent = 'Online - Full ML capabilities available';
        
        // Hide the status message after 3 seconds
        setTimeout(() => {
          statusElement.style.opacity = '0';
          statusElement.style.transform = 'translateY(-20px)';
          setTimeout(() => {
            statusElement.style.display = 'none';
          }, 300);
        }, 3000);
      } else {
        statusElement.className = 'online-status offline';
        indicator.className = 'status-indicator offline';
        text.textContent = 'Offline - Statistical models active';
        statusElement.style.display = 'block';
        statusElement.style.opacity = '1';
        statusElement.style.transform = 'translateY(0)';
      }
    }
    
    // Initialize on load
    window.addEventListener('load', () => {
      updateConnectionStatus();
      
      // Listen for connection changes
      window.addEventListener('online', updateConnectionStatus);
      window.addEventListener('offline', updateConnectionStatus);
    });
    
    async function runAdvancedDemo() {
      const button = document.getElementById('runDemoBtn');
      const results = document.getElementById('predictionResults');
      
      button.disabled = true;
      button.textContent = 'Running Advanced Analysis...';
      
      try {
        // Initialize prediction engine if needed
        if (!predictionEngine) {
          predictionEngine = new AdvancedPredictionEngine();
        }
        
        // Sample data for demo
        const sampleFormData = {
          rainfall: 75,
          plantingDate: new Date('2024-10-15'),
          region: 'southern_africa',
          crop: 'maize',
          soil: 'loam'
        };
        
        const sampleCropRules = {
          yield_range: [2.5, 4.5],
          rain_window: [60, 120],
          source: 'Advanced ML Demo'
        };
        
        const sampleCropProfile = {
          photosynthesis_type: 'C4',
          days_to_maturity: [90, 120],
          water_requirement_mm: [500, 800],
          avg_yield_tons_per_hectare: [3.0, 4.0],
          optimal_temp_c: [20, 30]
        };
        
        const sampleRegionInfo = {
          annual_rainfall_mm: 800,
          avg_monthly_temp_c: [25, 26, 24, 22, 20, 18, 18, 20, 23, 25, 26, 25],
          monthly_rainfall_mm: [120, 100, 80, 40, 20, 15, 10, 15, 30, 60, 100, 110]
        };
        
        // Run advanced prediction
        const prediction = await predictionEngine.generateAdvancedPrediction(
          sampleFormData, sampleCropRules, sampleCropProfile, sampleRegionInfo
        );
        
        // Display results
        displayPredictionResults(prediction);
        results.style.display = 'block';
        
      } catch (error) {
        console.error('Demo error:', error);
        alert('Demo error: ' + error.message);
      } finally {
        button.disabled = false;
        button.textContent = 'Run Advanced Prediction Demo';
      }
    }
    
    function displayPredictionResults(prediction) {
      const methodResults = document.getElementById('methodResults');
      const statsGrid = document.getElementById('statsGrid');
      const modelIntelligence = document.getElementById('modelIntelligence');
      
      // Display method results
      if (prediction.methods && prediction.methods.length > 0) {
        methodResults.innerHTML = prediction.methods.map(method => `
          <div class="method-card">
            <h3>${method.method.replace(/_/g, ' ').toUpperCase()}</h3>
            <p>Predicted Yield: <strong>${method.yieldEstimate.toFixed(2)} tons/hectare</strong></p>
            <div class="confidence-meter">
              <div class="confidence-fill" style="width: ${(method.confidence || 0.5) * 100}%"></div>
            </div>
            <p>Confidence: ${((method.confidence || 0.5) * 100).toFixed(1)}%</p>
            ${method.riskAnalysis ? `
              <div class="risk-analysis">
                <strong>Risk Metrics:</strong><br>
                Value at Risk (5%): ${method.riskAnalysis.valueAtRisk?.toFixed(2) || 'N/A'}<br>
                Probability of Loss: ${(method.riskAnalysis.probabilityOfLoss * 100)?.toFixed(1) || 'N/A'}%
              </div>
            ` : ''}
          </div>
        `).join('');
      } else {
        methodResults.innerHTML = `
          <div class="method-card">
            <h3>${prediction.method?.replace(/_/g, ' ').toUpperCase() || 'ENSEMBLE MODEL'}</h3>
            <p>Predicted Yield: <strong>${prediction.yieldEstimate.toFixed(2)} tons/hectare</strong></p>
            <div class="confidence-meter">
              <div class="confidence-fill" style="width: ${(prediction.confidence || 0.5) * 100}%"></div>
            </div>
            <p>Confidence: ${((prediction.confidence || 0.5) * 100).toFixed(1)}%</p>
            <p>Method: ${prediction.method || 'Advanced Ensemble'}</p>
            <p>Data Quality: ${prediction.dataQuality || 'High'}</p>
          </div>
        `;
      }
      
      // Display statistics
      statsGrid.innerHTML = `
        <div class="stat-item">
          <div class="stat-value">${prediction.yieldEstimate.toFixed(2)}</div>
          <div>Tons/Hectare</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">${((prediction.confidence || 0.5) * 100).toFixed(0)}%</div>
          <div>Confidence</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">${prediction.dataQuality || 'High'}</div>
          <div>Data Quality</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">${navigator.onLine ? 'Online' : 'Offline'}</div>
          <div>Mode</div>
        </div>
      `;
      
      // Display model intelligence
      const features = prediction.features || {};
      const adjustments = prediction.adjustments || {};
      
      modelIntelligence.innerHTML = `
        <div class="prediction-methods">
          <div class="method-card">
            <h4>ğŸ¯ Feature Analysis</h4>
            <div class="feature-importance">
              ${Object.entries(features).slice(0, 8).map(([key, value]) => 
                `<span class="feature-tag">${key}: ${typeof value === 'number' ? value.toFixed(2) : value}</span>`
              ).join('')}
            </div>
          </div>
          
          <div class="method-card">
            <h4>âš™ï¸ Model Adjustments</h4>
            <div class="feature-importance">
              ${Object.entries(adjustments).map(([key, value]) => 
                `<span class="feature-tag">${key}: ${typeof value === 'number' ? (value * 100).toFixed(1) + '%' : value}</span>`
              ).join('')}
            </div>
          </div>
          
          <div class="method-card">
            <h4>ğŸ“Š Uncertainty Analysis</h4>
            <p>Prediction Variance: ${prediction.variance?.toFixed(4) || 'N/A'}</p>
            <p>Method Agreement: ${prediction.methodAgreement ? (prediction.methodAgreement * 100).toFixed(1) + '%' : 'N/A'}</p>
            <p>Uncertainty: Â±${prediction.uncertainty?.toFixed(2) || '0.5'} tons/hectare</p>
          </div>
        </div>
      `;
    }

    // Enhanced Dashboard Functions
    function updateWeatherData() {
      const temp = Math.round(Math.random() * 15 + 18); // 18-33Â°C
      const humidity = Math.round(Math.random() * 40 + 40); // 40-80%
      const rainfall = Math.round(Math.random() * 20 + 5); // 5-25mm
      
      document.getElementById('temperature').textContent = `${temp}Â°C`;
      document.getElementById('humidity').textContent = `${humidity}%`;
      document.getElementById('rainfall').textContent = `${rainfall}mm`;
      
      // Add visual feedback
      const btn = event.target;
      btn.style.transform = 'rotate(360deg)';
      btn.style.background = 'linear-gradient(135deg, #4CAF50, #2E7D32)';
      setTimeout(() => {
        btn.style.transform = 'rotate(0deg)';
        btn.style.background = 'linear-gradient(135deg, #81C784, #66BB6A)';
      }, 600);
    }

    function analyzeSoil() {
      const soilMetrics = document.querySelectorAll('.metric-fill');
      soilMetrics.forEach((metric, index) => {
        const randomValue = Math.random() * 40 + 50; // 50-90%
        metric.style.width = `${randomValue}%`;
        
        // Update text
        const labels = ['pH Level', 'Moisture', 'Nutrients'];
        const values = [
          (Math.random() * 2 + 6).toFixed(1), // pH 6-8
          Math.round(randomValue) + '%',
          Math.round(randomValue) + '%'
        ];
        metric.parentElement.nextElementSibling.textContent = `${labels[index]}: ${values[index]}`;
      });
      
      // Add soil analysis result
      setTimeout(() => {
        showNotification('ğŸ”¬ Soil analysis complete! Optimal conditions detected.', 'success');
      }, 1500);
    }

    function updateGrowthStage() {
      const stages = document.querySelectorAll('.stage-indicator');
      const progressFill = document.querySelector('.progress-fill');
      const progressText = document.querySelector('.growth-progress span');
      
      const currentProgress = parseInt(progressFill.style.width) || 65;
      const newProgress = Math.min(currentProgress + Math.random() * 15, 100);
      
      progressFill.style.width = `${newProgress}%`;
      progressText.textContent = `Growth Progress: ${Math.round(newProgress)}%`;
      
      // Update stage indicators
      const activeStages = Math.floor(newProgress / 25);
      stages.forEach((stage, index) => {
        if (index <= activeStages) {
          stage.classList.add('active');
        }
      });
      
      if (newProgress >= 100) {
        showNotification('ğŸ‰ Crop has reached full maturity! Ready for harvest.', 'success');
      }
    }

    function runRealTimePrediction() {
      const predictions = [
        { label: 'Yield Forecast', value: `+${(Math.random() * 5 + 6).toFixed(1)} tons/ha`, class: 'good' },
        { label: 'Risk Level', value: ['Low', 'Medium', 'High'][Math.floor(Math.random() * 3)], class: 'moderate' },
        { label: 'Harvest Date', value: `Oct ${Math.floor(Math.random() * 20 + 10)}`, class: '' }
      ];
      
      const predictionItems = document.querySelectorAll('.prediction-item');
      predictionItems.forEach((item, index) => {
        const valueSpan = item.querySelector('.prediction-value');
        valueSpan.textContent = predictions[index].value;
        valueSpan.className = `prediction-value ${predictions[index].class}`;
      });
      
      showNotification('ğŸ¯ AI prediction updated with real-time data!', 'info');
    }

    function updateCropAnalysis() {
      const cropType = document.getElementById('cropType').value;
      const cropEmojis = {
        maize: 'ğŸŒ½',
        wheat: 'ğŸŒ¾', 
        rice: 'ğŸš',
        soybean: 'ğŸ«˜',
        tomato: 'ğŸ…'
      };
      
      showNotification(`${cropEmojis[cropType]} Crop analysis updated for ${cropType}!`, 'info');
    }

    function updateFarmSize(value) {
      document.getElementById('farmSizeValue').textContent = `${value} ha`;
    }

    function updateTechLevel() {
      const techLevel = document.getElementById('techLevel').value;
      const messages = {
        basic: 'ğŸšœ Basic farming methods selected',
        precision: 'ğŸ“¡ Precision agriculture enabled',
        smart: 'ğŸ¤– Smart farming systems activated',
        autonomous: 'ğŸ›¸ Autonomous systems online'
      };
      
      showNotification(messages[techLevel], 'info');
    }

    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      notification.className = `notification ${type}`;
      notification.textContent = message;
      notification.style.cssText = `
        position: fixed;
        top: 120px;
        right: 2rem;
        background: ${type === 'success' ? '#4CAF50' : type === 'info' ? '#2196F3' : '#FF9800'};
        color: white;
        padding: 1rem 1.5rem;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        z-index: 1001;
        transform: translateX(100%);
        transition: transform 0.3s ease;
      `;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.transform = 'translateX(0)';
      }, 100);
      
      setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => {
          document.body.removeChild(notification);
        }, 300);
      }, 3000);
    }

    // Initialize dashboard on page load
    document.addEventListener('DOMContentLoaded', function() {
      // Simulate real-time updates
      setInterval(updateWeatherData, 30000); // Update weather every 30 seconds
      
      // Add some initial animations
      setTimeout(() => {
        const cards = document.querySelectorAll('.dashboard-card');
        cards.forEach((card, index) => {
          card.style.animation = `slideInUp 0.6s ease ${index * 0.1}s both`;
        });
      }, 500);
    });
  </script>

  <style>
    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</body>
</html>
